<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Registration Page</title>
        <link rel="stylesheet" href="/css/addPost.css" />
        <script src="/js/jquery.min.js"></script>
    </head>

    <body>
        <main id="mainHolder">
            <form id="postForm" onsubmit="testabc(event)">
                 <!-- Logo -->
                 <img src="/resources/images/logo.png" alt="code." id="logo" />
                <!--Titel vom Beitrag-->
                <div>
                    <input id="subject"
                    class="textBasic"
                    type="text"
                    name="Subject"
                    placeholder="Subject"
                    maxlength="150"
                    required>
                </div>
                <!--Text des Beitrags-->
                <div>
                    <input id="user"
                    class="textBasic"
                    name="post"
                    placeholder="Please enter name"
                    maxlength="55"
                    required />
                </div>
                <!-- Hidden Field to get back to the Form after Submitting -->
<!--                <input type="hidden" name="caller" value="/addPost" />-->
                
                <button id="submitPost" class="textBasic">Submit</button>
            </form>
        </main>
        <script>
            async function testabc(event) {
                event.preventDefault();
                let currentPost = {}

                currentPost.subject = document.querySelector('#subject').value
                currentPost.username = document.querySelector('#user').value

                const url = `${window.location.origin}/api/posts`
                const body = {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(currentPost),
                }

                const abc = fetch(url, body)
                    .then((response) => response.json())
                    .catch((error) => console.error(error))

                console.log(abc)
            }
        </script>
    </body>
</html>